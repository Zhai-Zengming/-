C51 COMPILER V9.54   MAIN                                                                  03/10/2022 12:59:12 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil5\installed file\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\
                    -Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /*
   2           * @brief : led闪烁三次后，蜂鸣器叫，继电器吸合，
   3           *                      然后蜂鸣器和继电器关闭，led再依次亮灭
   4           * @date  : 2022/3/10
   5           */
   6           
   7           
   8           #include <reg52.h>
   9           
  10           void delay(u16 t)
  11           {
  12   1               u16 i = 60000;
  13   1               while(i--);
  14   1               while(t--);
  15   1       }
  16           
  17           void hc138_select(u8 n)
  18           {
  19   1               switch(n)
  20   1               {
  21   2                       case 4:
  22   2                               P2 = ((P2 & 0x1f) | 0x80); break;     //Y4输出低电平
  23   2                       case 5:
  24   2                               P2 = ((P2 & 0x1f) | 0xa0); break;     //Y5输出低电平
  25   2                       case 6:
  26   2                               P2 = ((P2 & 0x1f) | 0xc0); break;     //Y6输出低电平
  27   2                       case 7:
  28   2                               P2 = ((P2 & 0x1f) | 0xe0); break;     //Y7输出低电平
  29   2               }
  30   1       }
  31           
  32           void system_init(void)    //初始化，关闭蜂鸣器，继电器等
  33           {
  34   1               hc138_select(5);
  35   1               P0 = 0;
  36   1       }
  37           
  38           void system_work(void)
  39           {
  40   1               u8 i;
  41   1               
  42   1               hc138_select(4);
  43   1               for(i = 0; i < 3; i++)  //led闪烁三次
  44   1               {
  45   2                       P0 = 0;
  46   2                       delay(60000);
  47   2                       P0 = 0xff;
  48   2                       delay(60000);
  49   2               }
  50   1               
  51   1               hc138_select(5);
  52   1               P06 = 1;         //打开蜂鸣器
  53   1               P04 = 1;         //打开继电器
  54   1               delay(60000);
C51 COMPILER V9.54   MAIN                                                                  03/10/2022 12:59:12 PAGE 2   

  55   1               P04 = 0;         //关闭继电器
  56   1               P06 = 0;         //关闭蜂鸣器
  57   1               
  58   1               hc138_select(4);
  59   1               for(i = 0; i < 8; i++)  //led依次点亮
  60   1               {
  61   2                       P0 = (0xff << i);
  62   2                       delay(30000);
  63   2               }
  64   1               for(i = 0; i < 8; i++)  //led依次熄灭
  65   1               {
  66   2                       P0 = ~(0xff << i);
  67   2                       delay(30000);
  68   2               }
  69   1       }
  70           
  71           void main()
  72           {
  73   1               system_init();
  74   1               while(1)
  75   1               {
  76   2                       system_work();
  77   2               }
  78   1       }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
